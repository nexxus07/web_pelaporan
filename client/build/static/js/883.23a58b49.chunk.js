"use strict";(self.webpackChunksipelmasd_client=self.webpackChunksipelmasd_client||[]).push([[883],{883:(e,a,s)=>{s.r(a),s.d(a,{default:()=>l});var n=s(43),i=s(619),r=s(579);const l=function(){const[e,a]=(0,n.useState)(null),[s,l]=(0,n.useState)([]),[t,o]=(0,n.useState)(!0),[c,d]=(0,n.useState)(!navigator.onLine);return(0,n.useEffect)((()=>{const e=(0,i.xI)(),s=(0,i.hg)(e,(async e=>{if(e){const n={nama:e.displayName,email:e.email,uid:e.uid,foto:e.photoURL};localStorage.setItem("cachedUserProfile",JSON.stringify(n)),a(n);const i=localStorage.getItem("cachedLaporan");if(i&&(l(JSON.parse(i)),o(!1)),navigator.onLine)try{const a=await fetch("".concat("http://localhost:4000","/api/pelaporan/user/").concat(e.uid));if(!a.ok)throw new Error("Gagal fetch data dari server");const s=await a.json();l(s),localStorage.setItem("cachedLaporan",JSON.stringify(s))}catch(s){console.error("Gagal fetch laporan:",s.message)}o(!1)}else{const e=localStorage.getItem("cachedUserProfile");e&&a(JSON.parse(e));const s=localStorage.getItem("cachedLaporan");s&&l(JSON.parse(s)),o(!1)}})),n=()=>d(!1),r=()=>d(!0);return window.addEventListener("online",n),window.addEventListener("offline",r),()=>{s(),window.removeEventListener("online",n),window.removeEventListener("offline",r)}}),[]),!e&&t?(0,r.jsx)("p",{style:{padding:"20px"},children:"Memuat profil..."}):(0,r.jsxs)("div",{className:"user-profile-container",children:[c&&(0,r.jsx)("div",{className:"user-profile-offline",children:"\u26a0\ufe0f Kamu sedang offline. Data yang ditampilkan berasal dari cache."}),(0,r.jsx)("div",{className:"user-profile-header",children:(0,r.jsx)("h2",{children:"Profil Pengguna"})}),(0,r.jsxs)("div",{className:"user-profile-info",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Email:"})," ",null===e||void 0===e?void 0:e.email]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"User ID:"})," ",null===e||void 0===e?void 0:e.uid]})]}),(0,r.jsx)("hr",{className:"user-profile-divider"}),(0,r.jsxs)("div",{className:"user-profile-history",children:[(0,r.jsx)("h2",{children:"Histori Laporan Anda"}),t?(0,r.jsx)("p",{children:"Memuat data laporan..."}):0===s.length?(0,r.jsx)("p",{children:"Belum ada laporan yang dikirim."}):(0,r.jsx)("ul",{children:s.map((e=>(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:e.judul}),(0,r.jsx)("br",{}),(0,r.jsxs)("span",{children:[e.kategori," - ",e.status]}),(0,r.jsx)("br",{}),(0,r.jsxs)("small",{children:["Tanggal Kejadian:"," ",new Date(e.tanggal_kejadian).toLocaleDateString()]})]},e._id)))})]})]})}}}]);
//# sourceMappingURL=883.23a58b49.chunk.js.map